{{ block title }}  Quiz <span id="results" >(You must answer at least one question correctly.)</span>{{ endblock }}{{ block content }}<link rel="stylesheet" href="{{ static 'css/global.css' }}">        {{ for f in form }}        <table class="form_line">            <tr>            <td>                 <div id="score_{{f.name}}" class="grade_cell"></div>            </td>            <td>                {{f.label}}                {{f}}                <div id="err_{{f.name}}" style="display: none" class="err-msg">                    {{ formfield_errors f.name }}                </div>            </td>            </tr>        </table>    {{endfor}}        <div id="check_block">        <input type="button" id="check_btn" value="Check Answers" class="btn-look-alike"/>    </div>    <div id="next_block" style="display: none">        {{next_button}}    </div><div id="overlay" class="hidden">&nbsp;</div><div id="fail_div" class="hidden">    <div id="fail_box">            <p>You did not answer any quiz questions correctly, and are no longer eligible to continue.</p>            <p>If you are attending this experiment from <em>prolific.com</em> please return the task.</p>    </div></div>          <style>    .form_line {        margin-bottom: 10px;    }        .correct {        border: 3px solid forestgreen;        border-radius: 50%;        background-color: lightgreen;        color: forestgreen;         font-weight: bold;        font-size: 1.1em;        padding: 5px 10px;   }        .wrong{        border: 3px solid indianred;        border-radius: 50%;        background-color: #fff5f5;        color: indianred;        font-weight: bold;        font-size: 1.1em;        padding: 5px 13px;    }        .grade_cell {        margin-right: 20px;    }        .err-msg {        background-color: #fff5f5;        color: indianred;        border: 3px solid indianred;        border-radius: 5pt;        padding: 5px;    }        #overlay {        position: absolute;        right: 0px;        top: 0px;        width: 100%;        height: 100%;        background-color: black;        opacity: 0.33;        z-iindex: 5;    }        #fail_div {        position: absolute;        right: 0px;        top: 0px;        width: 100%;        height: 100%;        z-index: 10;        display: flex;        justify-content: center;        align-items: center;             }        #fail_box{        background-color: white;        color:black;        font-size: 2em;        width: 85%;        text-align: center;        padding: 10px;        border: 5px solid indianred;        border-radius: 10pt;    }</style>    <script>    window.onload = function(e){        //Add event listener to the check button        // Collect the form data a send via live pages        let chk_btn = document.getElementById("check_btn")        chk_btn.addEventListener("click", function(e){                        //Loop over form selects and record selected options            selects = document.getElementsByClassName("form-select");            let form_data = {}            Array.prototype.forEach.call(selects, function(el) {                n = el.name;                s = el.options[el.selectedIndex].value                form_data[n] = s;            });                        //Send data            liveSend({'func': 'grade_it', 'data': form_data});        })                // Load page with current responses        liveSend({"func": "load"});    }            function liveRecv(data){        func = data.func;        if (func == 'graded'){            //respond to graded Quiz            update_results(data);                    } else if (func == 'load'){            // set form data            for ( i=1; i <= 5; i++){                id = "id_quiz_" + i;                ans_key = "quiz_" + i                v = data[ans_key];                if (v) {                    q = document.getElementById(id);                    q.value = v;                }            }                        update_results(data)        }    }        function update_results(data){        grades = data.grades;                // update title        total = grades.total_score;        failed = data.failed;        res_tag = document.getElementById("results")        res_tag.textContent = " - (" + total + " / 5)";        res_tag.style.visibility = 'visible';                // update Answers        show_chk_x(grades);                //show next button if all answers are correct        if (total == '5') {            n = document.getElementById("next_block");            n.style.display = 'block';            chk = document.getElementById("check_block");            chk.style.display = 'none';                        res_tag = document.getElementById("results")            res_tag.textContent = res_tag.textContent + "  - Click Next to Continue";                        // Disable form feilds if all are correct            selects = document.getElementsByClassName("form-select");                        Array.prototype.forEach.call(selects, function(el) {                el.disabled = true;            });                    } else if (failed)  {            res_tag.textContent = res_tag.textContent;            chk = document.getElementById("check_block");            chk.style.display = 'none';            ovr = document.getElementById("overlay");            ovr.classList.remove("hidden");            fb = document.getElementById("fail_div");            fb.classList.remove("hidden");                    } else {             res_tag = document.getElementById("results")             res_tag.textContent = res_tag.textContent + "  - Please correct your answers and click Check Answers again";        }    }            function show_chk_x(grades){          for ( i=1; i <= 5; i++){            q = document.getElementById("score_quiz_"+i)            value = grades[i]            err = document.getElementById("err_quiz_"+i);            if ( value ){                q.classList.add("correct");                q.classList.remove("wrong");                q.textContent = 'âœ“';                err.style.display = "none";                err.textContent = "";            } else {                q.classList.add("wrong");                q.classList.remove("correct");                q.textContent = ' x ';                err.style.display = "block";                err.textContent = ERR_MSG["err_quiz_"+i];            }        }           };        let ERR_MSG = {'err_quiz_1': "Your SELL order prices must be higher than all of your BUY order prices.",                'err_quiz_2': "The market price is determined by all orders that were submitted.  All shares of STOCK will trade at this price.  If you're BUY price is above the market price then you will likely buy shares at that market price.",                'err_quiz_3': "After each trading period, you will earn 5% interest on your CASH holdings.  Five percent of 200 is 10.",                'err_quiz_4': "You will earn 5% of your 100 CASH, or 5.  You will earn 1 for each share that you own, another 5.  Your updated CASH position will be 100 + 5 + 5 = 110",                'err_quiz_5': "At the end of the exeriment, you will receive 14 CASH for each share of stock that you own.  In this instance, you will receive 1 x 14 = 14.",                }</script>{{ endblock }}